
{
  "entities": {
    "Produce": {
      "title": "Produce",
      "description": "Represents a type of produce (fruit or vegetable).",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the produce (e.g., Apple, Tomato)."
        },
        "variety": {
          "type": "string",
          "description": "Variety of the produce (e.g., Red Delicious, Perita)."
        },
        "category": {
          "type": "string",
          "description": "Category of the produce (e.g., Fruit, Vegetable)."
        },
        "weightPerCrate": {
          "type": "number",
          "description": "Weight in kilograms per crate."
        }
      },
      "required": ["name", "category", "weightPerCrate"]
    },
    "Price": {
      "title": "Price",
      "description": "Represents the price of a specific produce item at a specific time.",
      "type": "object",
      "properties": {
        "produceId": {
          "type": "string",
          "description": "Reference to the Produce item this price belongs to."
        },
        "price": {
          "type": "number",
          "description": "Price per crate of the produce."
        },
        "date": {
          "type": "string",
          "description": "ISO 8601 string of when the price was recorded.",
          "format": "date-time"
        }
      },
      "required": ["produceId", "price", "date"]
    },
    "UserProfile": {
      "title": "User Profile",
      "description": "Stores public profile information for a user.",
      "type": "object",
      "properties": {
        "fullName": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        }
      },
      "required": ["fullName", "email"]
    },
    "InventoryItem": {
      "title": "Inventory Item",
      "description": "Represents a single type of produce held in a user's inventory.",
      "type": "object",
      "properties": {
        "produceId": {
          "type": "string",
          "description": "Reference to the global Produce item."
        },
        "quantity": {
          "type": "number",
          "description": "Number of crates in stock."
        },
        "purchasePrice": {
          "type": "number",
          "description": "Price per crate at which the item was purchased."
        },
        "purchaseDate": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 string of when the item was purchased."
        },
        "status": {
          "type": "string",
          "description": "Current status or location of the inventory item (e.g., En Reserva, Puesto 5)."
        },
        "sales": {
            "type": "array",
            "description": "A list of sales made from this specific inventory lot.",
            "items": {
                "$ref": "#/entities/Sale"
            }
        },
        "associatedCosts": {
            "type": "array",
            "description": "List of additional one-off costs associated with this inventory lot.",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string" },
                    "amount": { "type": "number" }
                },
                "required": ["name", "amount"]
            }
        }
      },
      "required": ["produceId", "quantity", "purchasePrice", "purchaseDate", "status"]
    },
    "Sale": {
        "title": "Sale",
        "description": "Represents a single sale transaction from an inventory lot.",
        "type": "object",
        "properties": {
            "quantity": { "type": "number", "description": "Number of crates sold." },
            "salePrice": { "type": "number", "description": "Price per crate for this sale." },
            "date": { "type": "string", "format": "date-time", "description": "ISO 8601 string of when the sale occurred." },
            "status": { "type": "string", "enum": ["Pagado", "Pendiente"], "description": "Status of the payment for this sale."}
        },
        "required": ["quantity", "salePrice", "date", "status"]
    },
    "Cost": {
      "title": "Cost",
      "description": "Represents a reusable, user-defined cost per crate.",
      "type": "object",
      "properties": {
        "name": { "type": "string", "description": "Name of the cost (e.g., Flete)." },
        "amount": { "type": "number", "description": "Cost amount per crate." }
      },
      "required": ["name", "amount"]
    },
    "Expense": {
        "title": "Expense",
        "description": "Represents a general business expense, not tied to a specific crate.",
        "type": "object",
        "properties": {
            "description": { "type": "string", "description": "Description of the expense." },
            "amount": { "type": "number", "description": "Total amount of the expense." },
            "date": { "type": "string", "format": "date-time", "description": "Date the expense was incurred." }
        },
        "required": ["description", "amount", "date"]
    }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "produces": {
      "schema": {
        "$ref": "#/entities/Produce"
      },
      "description": "Stores information about each type of produce. Anyone can read, only admins can write."
    },
    "prices": {
      "schema": {
        "$ref": "#/entities/Price"
      },
      "description": "Stores the time-series price data for all produce. Anyone can read, only admins can write."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores the profile for a specific user, identified by their Firebase Auth UID."
    },
    "/users/{userId}/inventory/{inventoryItemId}": {
      "schema": {
        "$ref": "#/entities/InventoryItem"
      },
      "description": "Stores the inventory items for a specific user."
    },
    "/users/{userId}/expenses/{expenseId}": {
      "schema": {
        "$ref": "#/entities/Expense"
      },
      "description": "Stores the business expenses for a specific user."
    },
    "/users/{userId}/costs/{costId}": {
      "schema": {
        "$ref": "#/entities/Cost"
      },
      "description": "Stores user-defined, reusable costs per crate."
    }
  }
}
